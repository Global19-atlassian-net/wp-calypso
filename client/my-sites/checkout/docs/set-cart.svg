<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="721px" preserveAspectRatio="none" style="width:1161px;height:721px;" version="1.1" viewBox="0 0 1161 721" width="1161px" zoomAndPan="magnify"><defs><filter height="300%" id="f1bvemg3za5h9h" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FACFD2" height="706.4746" style="stroke: #A80036; stroke-width: 1.0;" width="141" x="40" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="0" x="112.5" y="16.5684"/><rect fill="#F7DCC6" height="706.4746" style="stroke: #A80036; stroke-width: 1.0;" width="141" x="254" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="298" y="16.5684">Calypso</text><rect fill="#B8E6BF" height="706.4746" style="stroke: #A80036; stroke-width: 1.0;" width="722" x="407" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="138" x="699" y="16.5684">Composite Checkout</text><rect fill="#FFFFFF" filter="url(#f1bvemg3za5h9h)" height="114.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="105.5" y="425.0137"/><rect fill="#FFFFFF" filter="url(#f1bvemg3za5h9h)" height="173.1738" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="319.5" y="380.3926"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="110" x2="110" y1="75.2871" y2="655.498"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="324" x2="324" y1="75.2871" y2="655.498"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="494" x2="494" y1="75.2871" y2="655.498"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="647" x2="647" y1="75.2871" y2="655.498"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="808" x2="808" y1="75.2871" y2="655.498"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1060" x2="1060" y1="75.2871" y2="655.498"/><rect fill="#FEFECE" filter="url(#f1bvemg3za5h9h)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="49" y="39.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="56" y="60.334">WordPress.com</text><rect fill="#FEFECE" filter="url(#f1bvemg3za5h9h)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="49" y="654.498"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="56" y="675.0332">WordPress.com</text><rect fill="#FEFECE" filter="url(#f1bvemg3za5h9h)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="263" y="39.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="270" y="60.334">Undocumented</text><rect fill="#FEFECE" filter="url(#f1bvemg3za5h9h)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="263" y="654.498"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="270" y="675.0332">Undocumented</text><rect fill="#FEFECE" filter="url(#f1bvemg3za5h9h)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="153" x="416" y="39.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="139" x="423" y="60.334">CompositeCheckout</text><rect fill="#FEFECE" filter="url(#f1bvemg3za5h9h)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="153" x="416" y="654.498"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="139" x="423" y="675.0332">CompositeCheckout</text><rect fill="#FEFECE" filter="url(#f1bvemg3za5h9h)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="593" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="600" y="43.8457">useShopping</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="600.5" y="60.334">CartManager</text><rect fill="#FEFECE" filter="url(#f1bvemg3za5h9h)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="593" y="654.498"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="600" y="675.0332">useShopping</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="600.5" y="691.5215">CartManager</text><rect fill="#FEFECE" filter="url(#f1bvemg3za5h9h)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="754" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="761" y="43.8457">useShopping</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="763.5" y="60.334">CartReducer</text><rect fill="#FEFECE" filter="url(#f1bvemg3za5h9h)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="754" y="654.498"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="761" y="675.0332">useShopping</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="763.5" y="691.5215">CartReducer</text><rect fill="#FEFECE" filter="url(#f1bvemg3za5h9h)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="1000" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="1007" y="43.8457">useCartUpdate</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="1009" y="60.334">AndRevalidate</text><rect fill="#FEFECE" filter="url(#f1bvemg3za5h9h)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="1000" y="654.498"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="1007" y="675.0332">useCartUpdate</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="1009" y="691.5215">AndRevalidate</text><rect fill="#FFFFFF" filter="url(#f1bvemg3za5h9h)" height="114.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="105.5" y="425.0137"/><rect fill="#FFFFFF" filter="url(#f1bvemg3za5h9h)" height="173.1738" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="319.5" y="380.3926"/><polygon fill="#A80036" points="482.5,102.5977,492.5,106.5977,482.5,110.5977,486.5,106.5977" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="324.5" x2="488.5" y1="106.5977" y2="106.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="331.5" y="101.8555">import setCart</text><path d="M415,119.5977 L415,159.5977 L570,159.5977 L570,129.5977 L560,119.5977 L415,119.5977 " fill="#FBFB77" filter="url(#f1bvemg3za5h9h)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M560,119.5977 L560,129.5977 L570,129.5977 L560,119.5977 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="421" y="137.166">setCart from props</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="421" y="152.4766">or fall back to import</text><polygon fill="#A80036" points="635,186.5293,645,190.5293,635,194.5293,639,190.5293" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494.5" x2="641" y1="190.5293" y2="190.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="501.5" y="185.7871">setCart</text><polygon fill="#A80036" points="1048,215.8398,1058,219.8398,1048,223.8398,1052,219.8398" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="647" x2="1054" y1="219.8398" y2="219.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="654" y="215.0977">setCart</text><polygon fill="#FBFB77" filter="url(#f1bvemg3za5h9h)" points="740,232.8398,875,232.8398,885,243.8398,875,255.8398,740,255.8398,730,243.8398,740,232.8398" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="742" y="249.4082">cacheStatus: 'invalid'</text><polygon fill="#A80036" points="658,278.4609,648,282.4609,658,286.4609,654,282.4609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="652" x2="807" y1="282.4609" y2="282.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="664" y="277.7188">cacheStatus, dispatch</text><polygon fill="#A80036" points="1048,307.7715,1058,311.7715,1048,315.7715,1052,311.7715" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="647" x2="1054" y1="311.7715" y2="311.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="654" y="307.0293">cacheStatus, dispatch</text><path d="M967,324.7715 L967,349.7715 L1149,349.7715 L1149,334.7715 L1139,324.7715 L967,324.7715 " fill="#FBFB77" filter="url(#f1bvemg3za5h9h)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1139,324.7715 L1139,334.7715 L1149,334.7715 L1139,324.7715 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="973" y="342.3398">cacheStatus === 'invalid'</text><polygon fill="#A80036" points="340.5,376.3926,330.5,380.3926,340.5,384.3926,336.5,380.3926" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="334.5" x2="1059" y1="380.3926" y2="380.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="346.5" y="375.6504">&lt;&lt; setCart &gt;&gt;</text><polygon fill="#A80036" points="126.5,421.0137,116.5,425.0137,126.5,429.0137,122.5,425.0137" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="120.5" x2="318.5" y1="425.0137" y2="425.0137"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="132.5" y="404.9609">POST</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="132.5" y="420.2715">/me/shopping-cart/{cartKey}</text><path d="M8,438.0137 L8,524.0137 L210,524.0137 L210,448.0137 L200,438.0137 L8,438.0137 " fill="#FBFB77" filter="url(#f1bvemg3za5h9h)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M200,438.0137 L200,448.0137 L210,448.0137 L200,438.0137 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="14" y="455.582">May be passed:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="18" y="470.8926"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="14" y="486.2031">{ extra: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="46" y="501.5137">purchaseType: 'renewal'</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="14" y="516.8242">} }</text><polygon fill="#A80036" points="307.5,535.5664,317.5,539.5664,307.5,543.5664,311.5,539.5664" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="110.5" x2="313.5" y1="539.5664" y2="539.5664"/><polygon fill="#A80036" points="1048,549.5664,1058,553.5664,1048,557.5664,1052,553.5664" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="324.5" x2="1054" y1="553.5664" y2="553.5664"/><polygon fill="#A80036" points="819,594.1875,809,598.1875,819,602.1875,815,598.1875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="813" x2="1059" y1="598.1875" y2="598.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="825" y="578.1348">dispatches</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="228" x="825" y="593.4453">RECEIVE_UPDATED_RESPONSE_CART</text><path d="M736,611.1875 L736,636.1875 L876,636.1875 L876,621.1875 L866,611.1875 L736,611.1875 " fill="#FBFB77" filter="url(#f1bvemg3za5h9h)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M866,611.1875 L866,621.1875 L876,621.1875 L866,611.1875 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="742" y="628.7559">cacheStatus: 'valid'</text><!--
@startuml


skinparam ParticipantPadding 5
skinparam BoxPadding 5
box " " #facfd2
  participant WordPress.com
end box
box "Calypso" #f7dcc6
  participant Undocumented
end box
box "Composite Checkout" #b8e6bf
  participant CompositeCheckout
  participant useShoppingCartManager as "useShopping\nCartManager"
  participant useShoppingCartReducer as "useShopping\nCartReducer"
  participant useCartUpdateAndRevalidate as "useCartUpdate\nAndRevalidate"
end box

Undocumented -> CompositeCheckout : import setCart
note over CompositeCheckout
	setCart from props
	or fall back to import
end note
CompositeCheckout -> useShoppingCartManager : setCart
useShoppingCartManager -> useCartUpdateAndRevalidate : setCart
hnote over useShoppingCartReducer
	cacheStatus: 'invalid'
end hnote
useShoppingCartReducer -> useShoppingCartManager : cacheStatus, dispatch
useShoppingCartManager -> useCartUpdateAndRevalidate : cacheStatus, dispatch
note over useCartUpdateAndRevalidate
	cacheStatus === 'invalid'
end note
useCartUpdateAndRevalidate -> Undocumented : << setCart >>
activate Undocumented
Undocumented -> WordPress.com : POST\n/me/shopping-cart/{cartKey}
activate WordPress.com
note over WordPress.com
	May be passed:

	{ extra: {
		purchaseType: 'renewal'
	} }
end note
return
return
useCartUpdateAndRevalidate -> useShoppingCartReducer : dispatches\nRECEIVE_UPDATED_RESPONSE_CART
note over useShoppingCartReducer
	cacheStatus: 'valid'
end note

@enduml

PlantUML version 1.2019.06(Fri May 24 12:10:25 CDT 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 14+36-1461
Operating System: Mac OS X
OS Version: 10.15.7
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>