<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="998px" preserveAspectRatio="none" style="width:1605px;height:998px;" version="1.1" viewBox="0 0 1605 998" width="1605px" zoomAndPan="magnify"><defs><filter height="300%" id="f1i1p9chuwmmfh" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FACFD2" height="983.8672" style="stroke: #A80036; stroke-width: 1.0;" width="172" x="44" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="102" x="79" y="16.5684">WordPress.com</text><rect fill="#F7DCC6" height="983.8672" style="stroke: #A80036; stroke-width: 1.0;" width="141" x="273.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="317.5" y="16.5684">Calypso</text><rect fill="#F5E6B3" height="983.8672" style="stroke: #A80036; stroke-width: 1.0;" width="379" x="426.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="50" x="591" y="16.5684">Actions</text><rect fill="#B8E6BF" height="983.8672" style="stroke: #A80036; stroke-width: 1.0;" width="612" x="817.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="138" x="1054.5" y="16.5684">Composite Checkout</text><rect fill="#FFFFFF" filter="url(#f1i1p9chuwmmfh)" height="114.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="125" y="769.8496"/><rect fill="#FFFFFF" filter="url(#f1i1p9chuwmmfh)" height="173.1738" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="339" y="725.2285"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="130" x2="130" y1="91.7754" y2="916.4023"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="343.5" x2="343.5" y1="91.7754" y2="916.4023"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="483.5" x2="483.5" y1="91.7754" y2="916.4023"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="627.5" x2="627.5" y1="91.7754" y2="916.4023"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="753.5" x2="753.5" y1="91.7754" y2="916.4023"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="904.5" x2="904.5" y1="91.7754" y2="916.4023"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1057.5" x2="1057.5" y1="91.7754" y2="916.4023"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1226.5" x2="1226.5" y1="91.7754" y2="916.4023"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1360.5" x2="1360.5" y1="91.7754" y2="916.4023"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1521.5" x2="1521.5" y1="91.7754" y2="916.4023"/><rect fill="#FEFECE" filter="url(#f1i1p9chuwmmfh)" height="63.4648" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="53" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="129" x="63.5" y="43.8457">WPCOM_JSON_API_</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="60" y="60.334">Me_Shopping_Cart_</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="97" y="76.8223">Endpoint</text><rect fill="#FEFECE" filter="url(#f1i1p9chuwmmfh)" height="63.4648" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="53" y="915.4023"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="129" x="63.5" y="935.9375">WPCOM_JSON_API_</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="60" y="952.4258">Me_Shopping_Cart_</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="97" y="968.9141">Endpoint</text><rect fill="#FEFECE" filter="url(#f1i1p9chuwmmfh)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="282.5" y="56.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="289.5" y="76.8223">Undocumented</text><rect fill="#FEFECE" filter="url(#f1i1p9chuwmmfh)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="282.5" y="915.4023"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="289.5" y="935.9375">Undocumented</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="430.5" y="72.334">SecondaryCart</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="441" y="88.8223">Promotions</text><ellipse cx="483.5" cy="42.7988" fill="#FEFECE" filter="url(#f1i1p9chuwmmfh)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="479.5,30.7988,485.5,25.7988,483.5,30.7988,485.5,35.7988,479.5,30.7988" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="430.5" y="928.9375">SecondaryCart</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="441" y="945.4258">Promotions</text><ellipse cx="483.5" cy="964.3789" fill="#FEFECE" filter="url(#f1i1p9chuwmmfh)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="479.5,952.3789,485.5,947.3789,483.5,952.3789,485.5,957.3789,479.5,952.3789" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="589.5" y="72.334">Upcoming</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="559.5" y="88.8223">RenewalsReminder</text><ellipse cx="627.5" cy="42.7988" fill="#FEFECE" filter="url(#f1i1p9chuwmmfh)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="623.5,30.7988,629.5,25.7988,627.5,30.7988,629.5,35.7988,623.5,30.7988" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="589.5" y="928.9375">Upcoming</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="559.5" y="945.4258">RenewalsReminder</text><ellipse cx="627.5" cy="964.3789" fill="#FEFECE" filter="url(#f1i1p9chuwmmfh)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="623.5,952.3789,629.5,947.3789,627.5,952.3789,629.5,957.3789,623.5,952.3789" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="705.5" y="72.334">CartFreeUser</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="715" y="88.8223">PlanUpsell</text><ellipse cx="753.5" cy="42.7988" fill="#FEFECE" filter="url(#f1i1p9chuwmmfh)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="749.5,30.7988,755.5,25.7988,753.5,30.7988,755.5,35.7988,749.5,30.7988" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="705.5" y="928.9375">CartFreeUser</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="715" y="945.4258">PlanUpsell</text><ellipse cx="753.5" cy="964.3789" fill="#FEFECE" filter="url(#f1i1p9chuwmmfh)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="749.5,952.3789,755.5,947.3789,753.5,952.3789,755.5,957.3789,749.5,952.3789" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1i1p9chuwmmfh)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="153" x="826.5" y="56.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="139" x="833.5" y="76.8223">CompositeCheckout</text><rect fill="#FEFECE" filter="url(#f1i1p9chuwmmfh)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="153" x="826.5" y="915.4023"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="139" x="833.5" y="935.9375">CompositeCheckout</text><rect fill="#FEFECE" filter="url(#f1i1p9chuwmmfh)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="1003.5" y="39.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1010.5" y="60.334">useShopping</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="1011" y="76.8223">CartManager</text><rect fill="#FEFECE" filter="url(#f1i1p9chuwmmfh)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="1003.5" y="915.4023"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1010.5" y="935.9375">useShopping</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="1011" y="952.4258">CartManager</text><rect fill="#FEFECE" filter="url(#f1i1p9chuwmmfh)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="1172.5" y="39.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1179.5" y="60.334">useShopping</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="1182" y="76.8223">CartReducer</text><rect fill="#FEFECE" filter="url(#f1i1p9chuwmmfh)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="1172.5" y="915.4023"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1179.5" y="935.9375">useShopping</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="1182" y="952.4258">CartReducer</text><rect fill="#FEFECE" filter="url(#f1i1p9chuwmmfh)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="1300.5" y="39.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="1307.5" y="60.334">useCartUpdate</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="1309.5" y="76.8223">AndRevalidate</text><rect fill="#FEFECE" filter="url(#f1i1p9chuwmmfh)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="1300.5" y="915.4023"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="1307.5" y="935.9375">useCartUpdate</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="1309.5" y="952.4258">AndRevalidate</text><rect fill="#FEFECE" filter="url(#f1i1p9chuwmmfh)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="149" x="1445.5" y="56.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="135" x="1452.5" y="76.8223">CheckoutController</text><rect fill="#FEFECE" filter="url(#f1i1p9chuwmmfh)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="149" x="1445.5" y="915.4023"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="135" x="1452.5" y="935.9375">CheckoutController</text><rect fill="#FFFFFF" filter="url(#f1i1p9chuwmmfh)" height="114.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="125" y="769.8496"/><rect fill="#FFFFFF" filter="url(#f1i1p9chuwmmfh)" height="173.1738" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="339" y="725.2285"/><polygon fill="#A80036" points="893,119.0859,903,123.0859,893,127.0859,897,123.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="344" x2="899" y1="123.0859" y2="123.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="351" y="118.3438">import setCart</text><path d="M825,136.0859 L825,176.0859 L980,176.0859 L980,146.0859 L970,136.0859 L825,136.0859 " fill="#FBFB77" filter="url(#f1i1p9chuwmmfh)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M970,136.0859 L970,146.0859 L980,146.0859 L970,136.0859 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="831" y="153.6543">setCart from props</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="831" y="168.9648">or fall back to import</text><polygon fill="#A80036" points="1045.5,203.0176,1055.5,207.0176,1045.5,211.0176,1049.5,207.0176" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="905" x2="1051.5" y1="207.0176" y2="207.0176"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="912" y="202.2754">setCart</text><polygon fill="#A80036" points="1348.5,232.3281,1358.5,236.3281,1348.5,240.3281,1352.5,236.3281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1057.5" x2="1354.5" y1="236.3281" y2="236.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="1064.5" y="231.5859">setCart</text><polygon fill="#A80036" points="916,261.6387,906,265.6387,916,269.6387,912,265.6387" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="910" x2="1056.5" y1="265.6387" y2="265.6387"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="922" y="260.8965">addProductsToCart</text><polygon fill="#A80036" points="494.5,290.9492,484.5,294.9492,494.5,298.9492,490.5,294.9492" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="488.5" x2="904" y1="294.9492" y2="294.9492"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="500.5" y="290.207">addProductsToCart</text><polygon fill="#A80036" points="615.5,320.2598,625.5,324.2598,615.5,328.2598,619.5,324.2598" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="483.5" x2="621.5" y1="324.2598" y2="324.2598"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="490.5" y="319.5176">addProductsToCart</text><path d="M482,337.2598 L482,408.2598 L768,408.2598 L768,347.2598 L758,337.2598 L482,337.2598 " fill="#FBFB77" filter="url(#f1i1p9chuwmmfh)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M758,337.2598 L758,347.2598 L768,347.2598 L758,337.2598 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="488" y="354.8281">&lt;&lt; getRenewableSitePurchases &gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="488" y="370.1387">sent to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="227" x="488" y="385.4492">&lt;&lt; getRenewalItemFromProduct &gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="520" y="400.7598">&lt;&lt; getRenewalItemFromCartItem &gt;&gt;</text><polygon fill="#A80036" points="1045.5,434.8125,1055.5,438.8125,1045.5,442.8125,1049.5,438.8125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="627.5" x2="1051.5" y1="438.8125" y2="438.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="634.5" y="434.0703">&lt;&lt; addProductsToCart &gt;&gt;</text><polygon fill="#A80036" points="1214.5,479.4336,1224.5,483.4336,1214.5,487.4336,1218.5,483.4336" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1057.5" x2="1220.5" y1="483.4336" y2="483.4336"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="1064.5" y="463.3809">dispatches</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="1064.5" y="478.6914">CART_PRODUCTS_ADD</text><polygon fill="#A80036" points="741.5,508.7441,751.5,512.7441,741.5,516.7441,745.5,512.7441" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="483.5" x2="747.5" y1="512.7441" y2="512.7441"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="490.5" y="508.002">addProductsToCart</text><polygon fill="#A80036" points="1237.5,568.6758,1227.5,572.6758,1237.5,576.6758,1233.5,572.6758" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1231.5" x2="1521" y1="572.6758" y2="572.6758"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="1243.5" y="537.3125">&lt;&lt; addItem &gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="1243.5" y="552.623">dispatches</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="1243.5" y="567.9336">ADD_CART_ITEM</text><path d="M1148,585.6758 L1148,610.6758 L1300,610.6758 L1300,595.6758 L1290,585.6758 L1148,585.6758 " fill="#FBFB77" filter="url(#f1i1p9chuwmmfh)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1290,585.6758 L1290,595.6758 L1300,595.6758 L1290,585.6758 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="1154" y="603.2441">cacheStatus: 'invalid'</text><polygon fill="#A80036" points="1348.5,637.2969,1358.5,641.2969,1348.5,645.2969,1352.5,641.2969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1226.5" x2="1354.5" y1="641.2969" y2="641.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="1233.5" y="636.5547">cacheStatus</text><path d="M1231,654.2969 L1231,694.2969 L1486,694.2969 L1486,664.2969 L1476,654.2969 L1231,654.2969 " fill="#FBFB77" filter="url(#f1i1p9chuwmmfh)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1476,654.2969 L1476,664.2969 L1486,664.2969 L1476,654.2969 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="1237" y="671.8652">Dispatch</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="1237" y="687.1758">REQUEST_UPDATED_RESPONSE_CART</text><polygon fill="#A80036" points="360,721.2285,350,725.2285,360,729.2285,356,725.2285" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="354" x2="1359.5" y1="725.2285" y2="725.2285"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="366" y="720.4863">&lt;&lt; setCart &gt;&gt;</text><polygon fill="#A80036" points="146,765.8496,136,769.8496,146,773.8496,142,769.8496" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="140" x2="338" y1="769.8496" y2="769.8496"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="152" y="749.7969">POST</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="152" y="765.1074">/me/shopping-cart/{cartKey}</text><path d="M8,782.8496 L8,868.8496 L248,868.8496 L248,792.8496 L238,782.8496 L8,782.8496 " fill="#FBFB77" filter="url(#f1i1p9chuwmmfh)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M238,782.8496 L238,792.8496 L248,792.8496 L238,782.8496 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219" x="14" y="800.418">getRenewalItemFromCartItem adds</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="18" y="815.7285"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="14" y="831.0391">{ extra: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="46" y="846.3496">purchaseType: 'renewal'</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="14" y="861.6602">} }</text><polygon fill="#A80036" points="327,880.4023,337,884.4023,327,888.4023,331,884.4023" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="130" x2="333" y1="884.4023" y2="884.4023"/><polygon fill="#A80036" points="1348.5,894.4023,1358.5,898.4023,1348.5,902.4023,1352.5,898.4023" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="344" x2="1354.5" y1="898.4023" y2="898.4023"/><!--
@startuml


skinparam ParticipantPadding 5
skinparam BoxPadding 5
box "WordPress.com" #facfd2
  participant WPCOM_JSON_API_Me_Shopping_Cart_Endpoint as "WPCOM_JSON_API_\nMe_Shopping_Cart_\nEndpoint"
end box
box "Calypso" #f7dcc6
  participant Undocumented
end box
box "Actions" #f5e6b3
	control SecondaryCartPromotions as "SecondaryCart\nPromotions"
	control UpcomingRenewalsReminder as "Upcoming\nRenewalsReminder"
	control CartFreeUserPlanUpsell as "CartFreeUser\nPlanUpsell"
end box
box "Composite Checkout" #b8e6bf
  participant CompositeCheckout
  participant useShoppingCartManager as "useShopping\nCartManager"
  participant useShoppingCartReducer as "useShopping\nCartReducer"
  participant useCartUpdateAndRevalidate as "useCartUpdate\nAndRevalidate"
end box

Undocumented -> CompositeCheckout : import setCart
note over CompositeCheckout
	setCart from props
	or fall back to import
end note
CompositeCheckout -> useShoppingCartManager : setCart
useShoppingCartManager -> useCartUpdateAndRevalidate : setCart

useShoppingCartManager -> CompositeCheckout : addProductsToCart
CompositeCheckout -> SecondaryCartPromotions : addProductsToCart
SecondaryCartPromotions -> UpcomingRenewalsReminder : addProductsToCart
note over UpcomingRenewalsReminder
	<< getRenewableSitePurchases >>
	sent to
	<< getRenewalItemFromProduct >>
		<< getRenewalItemFromCartItem >>
end note
UpcomingRenewalsReminder -> useShoppingCartManager : << addProductsToCart >>
useShoppingCartManager -> useShoppingCartReducer : dispatches\nCART_PRODUCTS_ADD
SecondaryCartPromotions -> CartFreeUserPlanUpsell : addProductsToCart


CheckoutController -> useShoppingCartReducer : << addItem >>\ndispatches\nADD_CART_ITEM
note over useShoppingCartReducer
	cacheStatus: 'invalid'
end note
useShoppingCartReducer -> useCartUpdateAndRevalidate : cacheStatus
note over useCartUpdateAndRevalidate
	Dispatch
	REQUEST_UPDATED_RESPONSE_CART
end note
useCartUpdateAndRevalidate -> Undocumented : << setCart >>
activate Undocumented
Undocumented -> WPCOM_JSON_API_Me_Shopping_Cart_Endpoint : POST\n/me/shopping-cart/{cartKey}
activate WPCOM_JSON_API_Me_Shopping_Cart_Endpoint
note over WPCOM_JSON_API_Me_Shopping_Cart_Endpoint
	getRenewalItemFromCartItem adds

	{ extra: {
		purchaseType: 'renewal'
	} }
end note
return
return

@enduml

PlantUML version 1.2019.06(Fri May 24 12:10:25 CDT 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 14+36-1461
Operating System: Mac OS X
OS Version: 10.15.7
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>